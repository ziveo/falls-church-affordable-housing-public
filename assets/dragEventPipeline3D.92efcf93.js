import{kO as y,l5 as m,lv as $,lw as g,l6 as E,r as u,l7 as O,t as x,a7 as I,a8 as N,ab as S,ah as R,lx as D,dJ as b,kC as G}from"./index.a0c3159d.js";function v(e,n){return H(e,()=>n)}function H(e,n){const t=R(),p=R();let l=!1;return s=>{const i=n(s);if(s.action==="start"){const a=m(s.screenStart,$(g.get())),r=E(e.state.camera,a,T);u(r)&&(l=O(i,r,t))}if(!l)return null;const f=m(s.screenEnd,$(g.get())),c=E(e.state.camera,f,T);return x(c)?null:O(i,c,p)?{...s,renderStart:t,renderEnd:p,plane:i,ray:c}:null}}var d;function w(e){let n=null;return t=>{switch(t.action){case"start":n=e.disableDisplay();break;case"end":case"cancel":u(n)&&(n.remove(),n=null)}return t}}function C(e,n=null){const t=I(e.state.viewingMode);t.options.selectionMode=!0,t.options.store=N.MIN,t.options.hud=!1;const p=G(),l={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},s=R(),i=S(n,e.spatialReference),f=a=>{e.map.ground&&e.map.ground.opacity<1?l.exclude.add(D):l.exclude.delete(D),e.sceneIntersectionHelper.intersectIntersectorScreen(m(a,p),t,l);const r=t.results.min;let o;if(r.getIntersectionPoint(s))o=r.intersector===b.TERRAIN?d.GROUND:d.OTHER;else{if(!t.results.ground.getIntersectionPoint(s))return null;o=d.GROUND}return{location:e.renderCoordsHelper.fromRenderCoords(s,i),surfaceType:o}};let c;return a=>{if(a.action==="start"){const o=f(a.screenStart);c=u(o)?o.location:null}if(x(c))return null;const r=f(a.screenEnd);return u(r)&&u(r.location)?{...a,mapStart:c,mapEnd:r.location,surfaceType:r.surfaceType}:null}}(function(e){e[e.GROUND=0]="GROUND",e[e.OTHER=1]="OTHER"})(d||(d={}));const T=y();export{C as B,v as C,w as z};
